---
标题: nginx基础
---

<!-- TOC -->

- [1. nginx 配置](#1-nginx-配置)
    - [1.1. 通用语法](#11-通用语法)
        - [1.1.1. 时间单位](#111-时间单位)
        - [1.1.2. 空间单位](#112-空间单位)
        - [1.1.3. 配置语法概述](#113-配置语法概述)
        - [1.1.4. 命令行](#114-命令行)
        - [1.1.5. 命令FAQ](#115-命令faq)
            - [1.1.5.1. 热部署命令](#1151-热部署命令)
            - [1.1.5.2. 日志切割](#1152-日志切割)

<!-- /TOC -->

# 1. nginx 配置
## 1.1. 通用语法
### 1.1.1. 时间单位
| 表达式 |说明|
|:---|:---|
|ms|毫秒|
|d|天
|s|秒
|w|周
|m|分
|M|月，30天
|h|小时
|y|年，365天


### 1.1.2. 空间单位
|表达式|说明|
|:---|:---|
||字节（默认）
|k/K|千字节|
|m/M|兆字节|
|g/G|G字节|

### 1.1.3. 配置语法概述
+ 配置文件有指令和指令块组成
+ 每条指令以“;”结尾，指令与参数之间用空格分隔
+ 指令以“{}”大括号将多条指令组织在一起
+ include语句允许组合多个配置文件，以提高维护性
+ 使用“#”添加注释
+ 使用“$”使用变量
+ 部分指令支持正则表达式

### 1.1.4. 命令行
![](./imgs/04.png)

### 1.1.5. 命令FAQ
#### 1.1.5.1. 热部署命令
> 热部署会让老的继续完成正在处理的请求，新的请求全部发送到新的服务上，最后全部逐步替换

![](./imgs/05.png)

#### 1.1.5.2. 日志切割
> 将老日志拷贝走，然后执行nginx -s repopen，就会自动产生新的日志文件，可以用定时任务进行自动化处理。

![](./imgs/06.png)