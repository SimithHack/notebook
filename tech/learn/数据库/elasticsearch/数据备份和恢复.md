## 数据备份和恢复
快照备份是增量式的，它不会将原始数据拷贝一份另作保存，并且可以热备份。这种备份方式是很高效的。快照可以通过restore api恢复到正在运行的数据库中。
> es不支持使用拷贝目录的方式进行备份，es在运行的时候会不断的修改目录里的内容，es仅支持snpshot和restore的方式进行备份和恢复

### 版本兼容性
那个版本的snpshot只能恢复到高于备份版本的数据库中，所以因为要升级数据库而备份数据的话，要考虑数据版本的兼容性

### snpshot仓库
在执行快照之前需要准备注册快照仓库，建议每个主要版本都创建一个单独的快照仓库。如果同一个快照仓库被多个集群使用，确保仅有一个集群能够对该仓库进行写操作
其他的集群只有读权限
> 因为不同的集群版本snpshot的格式可能不一样

+ 创建一个snpshot仓库
```
PUT /_snapshot/my_backup
{
  "type": "fs",
  "settings": {
    "location": "my_backup_location"
  }
}
```
+ 获取快照仓库的信息
```
GET /_snapshot/my_backup
```
返回
```
{
  "my_backup": {
    "type": "fs",
    "settings": {
      "location": "my_backup_location"
    }
  }
}
```
